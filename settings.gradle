rootProject.name = 'Spring-Cloud-Demo'

def buildFiles = fileTree(rootDir) {
    def excludes = gradle.startParameter.projectProperties.get('excludeProjects')?.split(',')
    include '**/*.gradle'
    exclude 'build', '**/gradle', 'settings.gradle', 'buildSrc', '/build.gradle', '.', 'out', 'bin'
    if (excludes) {
        exclude excludes
    }
}

buildFiles.forEach { buildFile ->
    def buildFilePath = buildFile.parentFile.absolutePath
    def projectPath = buildFilePath.replace(rootDir.absolutePath, "").replace(File.separator, ":")
    include projectPath
}
